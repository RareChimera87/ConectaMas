---

import ChatComponent from '../../../components/ChatComponent.astro';

export async function getStaticPaths() {
  try {
    const response = await fetch('http://localhost:3001/api/students');
    
    if (response.ok) {
      const students = await response.json();
      
      return students.map((student: any) => ({ 
        params: { studentId: student.id.toString() } 
      }));
    }
    
    return [];
    
  } catch (error) {
    console.error('Error fetching students:', error);
    return [];
  }
}

const { studentId } = Astro.params;
---

<ChatComponent studentId={studentId} />